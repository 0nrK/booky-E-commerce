{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isIdentityCard;\n\nvar _assertString = _interopRequireDefault(require(\"./util/assertString\"));\n\nvar _isInt = _interopRequireDefault(require(\"./isInt\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar validators = {\n  PL: function PL(str) {\n    (0, _assertString.default)(str);\n    var weightOfDigits = {\n      1: 1,\n      2: 3,\n      3: 7,\n      4: 9,\n      5: 1,\n      6: 3,\n      7: 7,\n      8: 9,\n      9: 1,\n      10: 3,\n      11: 0\n    };\n\n    if (str != null && str.length === 11 && (0, _isInt.default)(str, {\n      allow_leading_zeroes: true\n    })) {\n      var digits = str.split('').slice(0, -1);\n      var sum = digits.reduce(function (acc, digit, index) {\n        return acc + Number(digit) * weightOfDigits[index + 1];\n      }, 0);\n      var modulo = sum % 10;\n      var lastDigit = Number(str.charAt(str.length - 1));\n\n      if (modulo === 0 && lastDigit === 0 || lastDigit === 10 - modulo) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n  ES: function ES(str) {\n    (0, _assertString.default)(str);\n    var DNI = /^[0-9X-Z][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKE]$/;\n    var charsValue = {\n      X: 0,\n      Y: 1,\n      Z: 2\n    };\n    var controlDigits = ['T', 'R', 'W', 'A', 'G', 'M', 'Y', 'F', 'P', 'D', 'X', 'B', 'N', 'J', 'Z', 'S', 'Q', 'V', 'H', 'L', 'C', 'K', 'E']; // sanitize user input\n\n    var sanitized = str.trim().toUpperCase(); // validate the data structure\n\n    if (!DNI.test(sanitized)) {\n      return false;\n    } // validate the control digit\n\n\n    var number = sanitized.slice(0, -1).replace(/[X,Y,Z]/g, function (char) {\n      return charsValue[char];\n    });\n    return sanitized.endsWith(controlDigits[number % 23]);\n  },\n  FI: function FI(str) {\n    // https://dvv.fi/en/personal-identity-code#:~:text=control%20character%20for%20a-,personal,-identity%20code%20calculated\n    (0, _assertString.default)(str);\n\n    if (str.length !== 11) {\n      return false;\n    }\n\n    if (!str.match(/^\\d{6}[\\-A\\+]\\d{3}[0-9ABCDEFHJKLMNPRSTUVWXY]{1}$/)) {\n      return false;\n    }\n\n    var checkDigits = '0123456789ABCDEFHJKLMNPRSTUVWXY';\n    var idAsNumber = parseInt(str.slice(0, 6), 10) * 1000 + parseInt(str.slice(7, 10), 10);\n    var remainder = idAsNumber % 31;\n    var checkDigit = checkDigits[remainder];\n    return checkDigit === str.slice(10, 11);\n  },\n  IN: function IN(str) {\n    var DNI = /^[1-9]\\d{3}\\s?\\d{4}\\s?\\d{4}$/; // multiplication table\n\n    var d = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [1, 2, 3, 4, 0, 6, 7, 8, 9, 5], [2, 3, 4, 0, 1, 7, 8, 9, 5, 6], [3, 4, 0, 1, 2, 8, 9, 5, 6, 7], [4, 0, 1, 2, 3, 9, 5, 6, 7, 8], [5, 9, 8, 7, 6, 0, 4, 3, 2, 1], [6, 5, 9, 8, 7, 1, 0, 4, 3, 2], [7, 6, 5, 9, 8, 2, 1, 0, 4, 3], [8, 7, 6, 5, 9, 3, 2, 1, 0, 4], [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]]; // permutation table\n\n    var p = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [1, 5, 7, 6, 2, 8, 3, 0, 9, 4], [5, 8, 0, 3, 7, 9, 6, 1, 4, 2], [8, 9, 1, 6, 0, 4, 3, 5, 2, 7], [9, 4, 5, 3, 1, 2, 6, 8, 7, 0], [4, 2, 8, 6, 5, 7, 3, 9, 0, 1], [2, 7, 9, 3, 8, 0, 6, 4, 1, 5], [7, 0, 4, 6, 9, 1, 3, 2, 5, 8]]; // sanitize user input\n\n    var sanitized = str.trim(); // validate the data structure\n\n    if (!DNI.test(sanitized)) {\n      return false;\n    }\n\n    var c = 0;\n    var invertedArray = sanitized.replace(/\\s/g, '').split('').map(Number).reverse();\n    invertedArray.forEach(function (val, i) {\n      c = d[c][p[i % 8][val]];\n    });\n    return c === 0;\n  },\n  IR: function IR(str) {\n    if (!str.match(/^\\d{10}$/)) return false;\n    str = \"0000\".concat(str).substr(str.length - 6);\n    if (parseInt(str.substr(3, 6), 10) === 0) return false;\n    var lastNumber = parseInt(str.substr(9, 1), 10);\n    var sum = 0;\n\n    for (var i = 0; i < 9; i++) {\n      sum += parseInt(str.substr(i, 1), 10) * (10 - i);\n    }\n\n    sum %= 11;\n    return sum < 2 && lastNumber === sum || sum >= 2 && lastNumber === 11 - sum;\n  },\n  IT: function IT(str) {\n    if (str.length !== 9) return false;\n    if (str === 'CA00000AA') return false; // https://it.wikipedia.org/wiki/Carta_d%27identit%C3%A0_elettronica_italiana\n\n    return str.search(/C[A-Z][0-9]{5}[A-Z]{2}/i) > -1;\n  },\n  NO: function NO(str) {\n    var sanitized = str.trim();\n    if (isNaN(Number(sanitized))) return false;\n    if (sanitized.length !== 11) return false;\n    if (sanitized === '00000000000') return false; // https://no.wikipedia.org/wiki/F%C3%B8dselsnummer\n\n    var f = sanitized.split('').map(Number);\n    var k1 = (11 - (3 * f[0] + 7 * f[1] + 6 * f[2] + 1 * f[3] + 8 * f[4] + 9 * f[5] + 4 * f[6] + 5 * f[7] + 2 * f[8]) % 11) % 11;\n    var k2 = (11 - (5 * f[0] + 4 * f[1] + 3 * f[2] + 2 * f[3] + 7 * f[4] + 6 * f[5] + 5 * f[6] + 4 * f[7] + 3 * f[8] + 2 * k1) % 11) % 11;\n    if (k1 !== f[9] || k2 !== f[10]) return false;\n    return true;\n  },\n  TH: function TH(str) {\n    if (!str.match(/^[1-8]\\d{12}$/)) return false; // validate check digit\n\n    var sum = 0;\n\n    for (var i = 0; i < 12; i++) {\n      sum += parseInt(str[i], 10) * (13 - i);\n    }\n\n    return str[12] === ((11 - sum % 11) % 10).toString();\n  },\n  LK: function LK(str) {\n    var old_nic = /^[1-9]\\d{8}[vx]$/i;\n    var new_nic = /^[1-9]\\d{11}$/i;\n    if (str.length === 10 && old_nic.test(str)) return true;else if (str.length === 12 && new_nic.test(str)) return true;\n    return false;\n  },\n  'he-IL': function heIL(str) {\n    var DNI = /^\\d{9}$/; // sanitize user input\n\n    var sanitized = str.trim(); // validate the data structure\n\n    if (!DNI.test(sanitized)) {\n      return false;\n    }\n\n    var id = sanitized;\n    var sum = 0,\n        incNum;\n\n    for (var i = 0; i < id.length; i++) {\n      incNum = Number(id[i]) * (i % 2 + 1); // Multiply number by 1 or 2\n\n      sum += incNum > 9 ? incNum - 9 : incNum; // Sum the digits up and add to total\n    }\n\n    return sum % 10 === 0;\n  },\n  'ar-LY': function arLY(str) {\n    // Libya National Identity Number NIN is 12 digits, the first digit is either 1 or 2\n    var NIN = /^(1|2)\\d{11}$/; // sanitize user input\n\n    var sanitized = str.trim(); // validate the data structure\n\n    if (!NIN.test(sanitized)) {\n      return false;\n    }\n\n    return true;\n  },\n  'ar-TN': function arTN(str) {\n    var DNI = /^\\d{8}$/; // sanitize user input\n\n    var sanitized = str.trim(); // validate the data structure\n\n    if (!DNI.test(sanitized)) {\n      return false;\n    }\n\n    return true;\n  },\n  'zh-CN': function zhCN(str) {\n    var provincesAndCities = ['11', // 北京\n    '12', // 天津\n    '13', // 河北\n    '14', // 山西\n    '15', // 内蒙古\n    '21', // 辽宁\n    '22', // 吉林\n    '23', // 黑龙江\n    '31', // 上海\n    '32', // 江苏\n    '33', // 浙江\n    '34', // 安徽\n    '35', // 福建\n    '36', // 江西\n    '37', // 山东\n    '41', // 河南\n    '42', // 湖北\n    '43', // 湖南\n    '44', // 广东\n    '45', // 广西\n    '46', // 海南\n    '50', // 重庆\n    '51', // 四川\n    '52', // 贵州\n    '53', // 云南\n    '54', // 西藏\n    '61', // 陕西\n    '62', // 甘肃\n    '63', // 青海\n    '64', // 宁夏\n    '65', // 新疆\n    '71', // 台湾\n    '81', // 香港\n    '82', // 澳门\n    '91' // 国外\n    ];\n    var powers = ['7', '9', '10', '5', '8', '4', '2', '1', '6', '3', '7', '9', '10', '5', '8', '4', '2'];\n    var parityBit = ['1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'];\n\n    var checkAddressCode = function checkAddressCode(addressCode) {\n      return provincesAndCities.includes(addressCode);\n    };\n\n    var checkBirthDayCode = function checkBirthDayCode(birDayCode) {\n      var yyyy = parseInt(birDayCode.substring(0, 4), 10);\n      var mm = parseInt(birDayCode.substring(4, 6), 10);\n      var dd = parseInt(birDayCode.substring(6), 10);\n      var xdata = new Date(yyyy, mm - 1, dd);\n\n      if (xdata > new Date()) {\n        return false; // eslint-disable-next-line max-len\n      } else if (xdata.getFullYear() === yyyy && xdata.getMonth() === mm - 1 && xdata.getDate() === dd) {\n        return true;\n      }\n\n      return false;\n    };\n\n    var getParityBit = function getParityBit(idCardNo) {\n      var id17 = idCardNo.substring(0, 17);\n      var power = 0;\n\n      for (var i = 0; i < 17; i++) {\n        power += parseInt(id17.charAt(i), 10) * parseInt(powers[i], 10);\n      }\n\n      var mod = power % 11;\n      return parityBit[mod];\n    };\n\n    var checkParityBit = function checkParityBit(idCardNo) {\n      return getParityBit(idCardNo) === idCardNo.charAt(17).toUpperCase();\n    };\n\n    var check15IdCardNo = function check15IdCardNo(idCardNo) {\n      var check = /^[1-9]\\d{7}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\\d{3}$/.test(idCardNo);\n      if (!check) return false;\n      var addressCode = idCardNo.substring(0, 2);\n      check = checkAddressCode(addressCode);\n      if (!check) return false;\n      var birDayCode = \"19\".concat(idCardNo.substring(6, 12));\n      check = checkBirthDayCode(birDayCode);\n      if (!check) return false;\n      return true;\n    };\n\n    var check18IdCardNo = function check18IdCardNo(idCardNo) {\n      var check = /^[1-9]\\d{5}[1-9]\\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\\d{3}(\\d|x|X)$/.test(idCardNo);\n      if (!check) return false;\n      var addressCode = idCardNo.substring(0, 2);\n      check = checkAddressCode(addressCode);\n      if (!check) return false;\n      var birDayCode = idCardNo.substring(6, 14);\n      check = checkBirthDayCode(birDayCode);\n      if (!check) return false;\n      return checkParityBit(idCardNo);\n    };\n\n    var checkIdCardNo = function checkIdCardNo(idCardNo) {\n      var check = /^\\d{15}|(\\d{17}(\\d|x|X))$/.test(idCardNo);\n      if (!check) return false;\n\n      if (idCardNo.length === 15) {\n        return check15IdCardNo(idCardNo);\n      }\n\n      return check18IdCardNo(idCardNo);\n    };\n\n    return checkIdCardNo(str);\n  },\n  'zh-TW': function zhTW(str) {\n    var ALPHABET_CODES = {\n      A: 10,\n      B: 11,\n      C: 12,\n      D: 13,\n      E: 14,\n      F: 15,\n      G: 16,\n      H: 17,\n      I: 34,\n      J: 18,\n      K: 19,\n      L: 20,\n      M: 21,\n      N: 22,\n      O: 35,\n      P: 23,\n      Q: 24,\n      R: 25,\n      S: 26,\n      T: 27,\n      U: 28,\n      V: 29,\n      W: 32,\n      X: 30,\n      Y: 31,\n      Z: 33\n    };\n    var sanitized = str.trim().toUpperCase();\n    if (!/^[A-Z][0-9]{9}$/.test(sanitized)) return false;\n    return Array.from(sanitized).reduce(function (sum, number, index) {\n      if (index === 0) {\n        var code = ALPHABET_CODES[number];\n        return code % 10 * 9 + Math.floor(code / 10);\n      }\n\n      if (index === 9) {\n        return (10 - sum % 10 - Number(number)) % 10 === 0;\n      }\n\n      return sum + Number(number) * (9 - index);\n    }, 0);\n  }\n};\n\nfunction isIdentityCard(str, locale) {\n  (0, _assertString.default)(str);\n\n  if (locale in validators) {\n    return validators[locale](str);\n  } else if (locale === 'any') {\n    for (var key in validators) {\n      // https://github.com/gotwarlost/istanbul/blob/master/ignoring-code-for-coverage.md#ignoring-code-for-coverage-purposes\n      // istanbul ignore else\n      if (validators.hasOwnProperty(key)) {\n        var validator = validators[key];\n\n        if (validator(str)) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  throw new Error(\"Invalid locale '\".concat(locale, \"'\"));\n}\n\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;","map":{"version":3,"sources":["/home/nrk/Desktop/projeler/bookStore/client/node_modules/validator/lib/isIdentityCard.js"],"names":["Object","defineProperty","exports","value","default","isIdentityCard","_assertString","_interopRequireDefault","require","_isInt","obj","__esModule","validators","PL","str","weightOfDigits","length","allow_leading_zeroes","digits","split","slice","sum","reduce","acc","digit","index","Number","modulo","lastDigit","charAt","ES","DNI","charsValue","X","Y","Z","controlDigits","sanitized","trim","toUpperCase","test","number","replace","char","endsWith","FI","match","checkDigits","idAsNumber","parseInt","remainder","checkDigit","IN","d","p","c","invertedArray","map","reverse","forEach","val","i","IR","concat","substr","lastNumber","IT","search","NO","isNaN","f","k1","k2","TH","toString","LK","old_nic","new_nic","heIL","id","incNum","arLY","NIN","arTN","zhCN","provincesAndCities","powers","parityBit","checkAddressCode","addressCode","includes","checkBirthDayCode","birDayCode","yyyy","substring","mm","dd","xdata","Date","getFullYear","getMonth","getDate","getParityBit","idCardNo","id17","power","mod","checkParityBit","check15IdCardNo","check","check18IdCardNo","checkIdCardNo","zhTW","ALPHABET_CODES","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","Array","from","code","Math","floor","locale","key","hasOwnProperty","validator","Error","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isIdentityCard;\n\nvar _assertString = _interopRequireDefault(require(\"./util/assertString\"));\n\nvar _isInt = _interopRequireDefault(require(\"./isInt\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar validators = {\n  PL: function PL(str) {\n    (0, _assertString.default)(str);\n    var weightOfDigits = {\n      1: 1,\n      2: 3,\n      3: 7,\n      4: 9,\n      5: 1,\n      6: 3,\n      7: 7,\n      8: 9,\n      9: 1,\n      10: 3,\n      11: 0\n    };\n\n    if (str != null && str.length === 11 && (0, _isInt.default)(str, {\n      allow_leading_zeroes: true\n    })) {\n      var digits = str.split('').slice(0, -1);\n      var sum = digits.reduce(function (acc, digit, index) {\n        return acc + Number(digit) * weightOfDigits[index + 1];\n      }, 0);\n      var modulo = sum % 10;\n      var lastDigit = Number(str.charAt(str.length - 1));\n\n      if (modulo === 0 && lastDigit === 0 || lastDigit === 10 - modulo) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n  ES: function ES(str) {\n    (0, _assertString.default)(str);\n    var DNI = /^[0-9X-Z][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKE]$/;\n    var charsValue = {\n      X: 0,\n      Y: 1,\n      Z: 2\n    };\n    var controlDigits = ['T', 'R', 'W', 'A', 'G', 'M', 'Y', 'F', 'P', 'D', 'X', 'B', 'N', 'J', 'Z', 'S', 'Q', 'V', 'H', 'L', 'C', 'K', 'E']; // sanitize user input\n\n    var sanitized = str.trim().toUpperCase(); // validate the data structure\n\n    if (!DNI.test(sanitized)) {\n      return false;\n    } // validate the control digit\n\n\n    var number = sanitized.slice(0, -1).replace(/[X,Y,Z]/g, function (char) {\n      return charsValue[char];\n    });\n    return sanitized.endsWith(controlDigits[number % 23]);\n  },\n  FI: function FI(str) {\n    // https://dvv.fi/en/personal-identity-code#:~:text=control%20character%20for%20a-,personal,-identity%20code%20calculated\n    (0, _assertString.default)(str);\n\n    if (str.length !== 11) {\n      return false;\n    }\n\n    if (!str.match(/^\\d{6}[\\-A\\+]\\d{3}[0-9ABCDEFHJKLMNPRSTUVWXY]{1}$/)) {\n      return false;\n    }\n\n    var checkDigits = '0123456789ABCDEFHJKLMNPRSTUVWXY';\n    var idAsNumber = parseInt(str.slice(0, 6), 10) * 1000 + parseInt(str.slice(7, 10), 10);\n    var remainder = idAsNumber % 31;\n    var checkDigit = checkDigits[remainder];\n    return checkDigit === str.slice(10, 11);\n  },\n  IN: function IN(str) {\n    var DNI = /^[1-9]\\d{3}\\s?\\d{4}\\s?\\d{4}$/; // multiplication table\n\n    var d = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [1, 2, 3, 4, 0, 6, 7, 8, 9, 5], [2, 3, 4, 0, 1, 7, 8, 9, 5, 6], [3, 4, 0, 1, 2, 8, 9, 5, 6, 7], [4, 0, 1, 2, 3, 9, 5, 6, 7, 8], [5, 9, 8, 7, 6, 0, 4, 3, 2, 1], [6, 5, 9, 8, 7, 1, 0, 4, 3, 2], [7, 6, 5, 9, 8, 2, 1, 0, 4, 3], [8, 7, 6, 5, 9, 3, 2, 1, 0, 4], [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]]; // permutation table\n\n    var p = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [1, 5, 7, 6, 2, 8, 3, 0, 9, 4], [5, 8, 0, 3, 7, 9, 6, 1, 4, 2], [8, 9, 1, 6, 0, 4, 3, 5, 2, 7], [9, 4, 5, 3, 1, 2, 6, 8, 7, 0], [4, 2, 8, 6, 5, 7, 3, 9, 0, 1], [2, 7, 9, 3, 8, 0, 6, 4, 1, 5], [7, 0, 4, 6, 9, 1, 3, 2, 5, 8]]; // sanitize user input\n\n    var sanitized = str.trim(); // validate the data structure\n\n    if (!DNI.test(sanitized)) {\n      return false;\n    }\n\n    var c = 0;\n    var invertedArray = sanitized.replace(/\\s/g, '').split('').map(Number).reverse();\n    invertedArray.forEach(function (val, i) {\n      c = d[c][p[i % 8][val]];\n    });\n    return c === 0;\n  },\n  IR: function IR(str) {\n    if (!str.match(/^\\d{10}$/)) return false;\n    str = \"0000\".concat(str).substr(str.length - 6);\n    if (parseInt(str.substr(3, 6), 10) === 0) return false;\n    var lastNumber = parseInt(str.substr(9, 1), 10);\n    var sum = 0;\n\n    for (var i = 0; i < 9; i++) {\n      sum += parseInt(str.substr(i, 1), 10) * (10 - i);\n    }\n\n    sum %= 11;\n    return sum < 2 && lastNumber === sum || sum >= 2 && lastNumber === 11 - sum;\n  },\n  IT: function IT(str) {\n    if (str.length !== 9) return false;\n    if (str === 'CA00000AA') return false; // https://it.wikipedia.org/wiki/Carta_d%27identit%C3%A0_elettronica_italiana\n\n    return str.search(/C[A-Z][0-9]{5}[A-Z]{2}/i) > -1;\n  },\n  NO: function NO(str) {\n    var sanitized = str.trim();\n    if (isNaN(Number(sanitized))) return false;\n    if (sanitized.length !== 11) return false;\n    if (sanitized === '00000000000') return false; // https://no.wikipedia.org/wiki/F%C3%B8dselsnummer\n\n    var f = sanitized.split('').map(Number);\n    var k1 = (11 - (3 * f[0] + 7 * f[1] + 6 * f[2] + 1 * f[3] + 8 * f[4] + 9 * f[5] + 4 * f[6] + 5 * f[7] + 2 * f[8]) % 11) % 11;\n    var k2 = (11 - (5 * f[0] + 4 * f[1] + 3 * f[2] + 2 * f[3] + 7 * f[4] + 6 * f[5] + 5 * f[6] + 4 * f[7] + 3 * f[8] + 2 * k1) % 11) % 11;\n    if (k1 !== f[9] || k2 !== f[10]) return false;\n    return true;\n  },\n  TH: function TH(str) {\n    if (!str.match(/^[1-8]\\d{12}$/)) return false; // validate check digit\n\n    var sum = 0;\n\n    for (var i = 0; i < 12; i++) {\n      sum += parseInt(str[i], 10) * (13 - i);\n    }\n\n    return str[12] === ((11 - sum % 11) % 10).toString();\n  },\n  LK: function LK(str) {\n    var old_nic = /^[1-9]\\d{8}[vx]$/i;\n    var new_nic = /^[1-9]\\d{11}$/i;\n    if (str.length === 10 && old_nic.test(str)) return true;else if (str.length === 12 && new_nic.test(str)) return true;\n    return false;\n  },\n  'he-IL': function heIL(str) {\n    var DNI = /^\\d{9}$/; // sanitize user input\n\n    var sanitized = str.trim(); // validate the data structure\n\n    if (!DNI.test(sanitized)) {\n      return false;\n    }\n\n    var id = sanitized;\n    var sum = 0,\n        incNum;\n\n    for (var i = 0; i < id.length; i++) {\n      incNum = Number(id[i]) * (i % 2 + 1); // Multiply number by 1 or 2\n\n      sum += incNum > 9 ? incNum - 9 : incNum; // Sum the digits up and add to total\n    }\n\n    return sum % 10 === 0;\n  },\n  'ar-LY': function arLY(str) {\n    // Libya National Identity Number NIN is 12 digits, the first digit is either 1 or 2\n    var NIN = /^(1|2)\\d{11}$/; // sanitize user input\n\n    var sanitized = str.trim(); // validate the data structure\n\n    if (!NIN.test(sanitized)) {\n      return false;\n    }\n\n    return true;\n  },\n  'ar-TN': function arTN(str) {\n    var DNI = /^\\d{8}$/; // sanitize user input\n\n    var sanitized = str.trim(); // validate the data structure\n\n    if (!DNI.test(sanitized)) {\n      return false;\n    }\n\n    return true;\n  },\n  'zh-CN': function zhCN(str) {\n    var provincesAndCities = ['11', // 北京\n    '12', // 天津\n    '13', // 河北\n    '14', // 山西\n    '15', // 内蒙古\n    '21', // 辽宁\n    '22', // 吉林\n    '23', // 黑龙江\n    '31', // 上海\n    '32', // 江苏\n    '33', // 浙江\n    '34', // 安徽\n    '35', // 福建\n    '36', // 江西\n    '37', // 山东\n    '41', // 河南\n    '42', // 湖北\n    '43', // 湖南\n    '44', // 广东\n    '45', // 广西\n    '46', // 海南\n    '50', // 重庆\n    '51', // 四川\n    '52', // 贵州\n    '53', // 云南\n    '54', // 西藏\n    '61', // 陕西\n    '62', // 甘肃\n    '63', // 青海\n    '64', // 宁夏\n    '65', // 新疆\n    '71', // 台湾\n    '81', // 香港\n    '82', // 澳门\n    '91' // 国外\n    ];\n    var powers = ['7', '9', '10', '5', '8', '4', '2', '1', '6', '3', '7', '9', '10', '5', '8', '4', '2'];\n    var parityBit = ['1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'];\n\n    var checkAddressCode = function checkAddressCode(addressCode) {\n      return provincesAndCities.includes(addressCode);\n    };\n\n    var checkBirthDayCode = function checkBirthDayCode(birDayCode) {\n      var yyyy = parseInt(birDayCode.substring(0, 4), 10);\n      var mm = parseInt(birDayCode.substring(4, 6), 10);\n      var dd = parseInt(birDayCode.substring(6), 10);\n      var xdata = new Date(yyyy, mm - 1, dd);\n\n      if (xdata > new Date()) {\n        return false; // eslint-disable-next-line max-len\n      } else if (xdata.getFullYear() === yyyy && xdata.getMonth() === mm - 1 && xdata.getDate() === dd) {\n        return true;\n      }\n\n      return false;\n    };\n\n    var getParityBit = function getParityBit(idCardNo) {\n      var id17 = idCardNo.substring(0, 17);\n      var power = 0;\n\n      for (var i = 0; i < 17; i++) {\n        power += parseInt(id17.charAt(i), 10) * parseInt(powers[i], 10);\n      }\n\n      var mod = power % 11;\n      return parityBit[mod];\n    };\n\n    var checkParityBit = function checkParityBit(idCardNo) {\n      return getParityBit(idCardNo) === idCardNo.charAt(17).toUpperCase();\n    };\n\n    var check15IdCardNo = function check15IdCardNo(idCardNo) {\n      var check = /^[1-9]\\d{7}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\\d{3}$/.test(idCardNo);\n      if (!check) return false;\n      var addressCode = idCardNo.substring(0, 2);\n      check = checkAddressCode(addressCode);\n      if (!check) return false;\n      var birDayCode = \"19\".concat(idCardNo.substring(6, 12));\n      check = checkBirthDayCode(birDayCode);\n      if (!check) return false;\n      return true;\n    };\n\n    var check18IdCardNo = function check18IdCardNo(idCardNo) {\n      var check = /^[1-9]\\d{5}[1-9]\\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\\d{3}(\\d|x|X)$/.test(idCardNo);\n      if (!check) return false;\n      var addressCode = idCardNo.substring(0, 2);\n      check = checkAddressCode(addressCode);\n      if (!check) return false;\n      var birDayCode = idCardNo.substring(6, 14);\n      check = checkBirthDayCode(birDayCode);\n      if (!check) return false;\n      return checkParityBit(idCardNo);\n    };\n\n    var checkIdCardNo = function checkIdCardNo(idCardNo) {\n      var check = /^\\d{15}|(\\d{17}(\\d|x|X))$/.test(idCardNo);\n      if (!check) return false;\n\n      if (idCardNo.length === 15) {\n        return check15IdCardNo(idCardNo);\n      }\n\n      return check18IdCardNo(idCardNo);\n    };\n\n    return checkIdCardNo(str);\n  },\n  'zh-TW': function zhTW(str) {\n    var ALPHABET_CODES = {\n      A: 10,\n      B: 11,\n      C: 12,\n      D: 13,\n      E: 14,\n      F: 15,\n      G: 16,\n      H: 17,\n      I: 34,\n      J: 18,\n      K: 19,\n      L: 20,\n      M: 21,\n      N: 22,\n      O: 35,\n      P: 23,\n      Q: 24,\n      R: 25,\n      S: 26,\n      T: 27,\n      U: 28,\n      V: 29,\n      W: 32,\n      X: 30,\n      Y: 31,\n      Z: 33\n    };\n    var sanitized = str.trim().toUpperCase();\n    if (!/^[A-Z][0-9]{9}$/.test(sanitized)) return false;\n    return Array.from(sanitized).reduce(function (sum, number, index) {\n      if (index === 0) {\n        var code = ALPHABET_CODES[number];\n        return code % 10 * 9 + Math.floor(code / 10);\n      }\n\n      if (index === 9) {\n        return (10 - sum % 10 - Number(number)) % 10 === 0;\n      }\n\n      return sum + Number(number) * (9 - index);\n    }, 0);\n  }\n};\n\nfunction isIdentityCard(str, locale) {\n  (0, _assertString.default)(str);\n\n  if (locale in validators) {\n    return validators[locale](str);\n  } else if (locale === 'any') {\n    for (var key in validators) {\n      // https://github.com/gotwarlost/istanbul/blob/master/ignoring-code-for-coverage.md#ignoring-code-for-coverage-purposes\n      // istanbul ignore else\n      if (validators.hasOwnProperty(key)) {\n        var validator = validators[key];\n\n        if (validator(str)) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  throw new Error(\"Invalid locale '\".concat(locale, \"'\"));\n}\n\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;"]},"metadata":{},"sourceType":"script"}